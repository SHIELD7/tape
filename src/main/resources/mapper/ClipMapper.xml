<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="site.imcu.tape.mapper.ClipMapper">
	<insert id="insertClip">
		insert into tape_clip(title,source_file,clip_path,thumbnail,creator,is_del,create_time,create_man)
		values(#{title},#{sourceFile},#{clipPath},#{thumbnail},#{user.id},0,#{createTime},#{createMan})
	</insert>
	<select id="selectRecommendList" resultType="site.imcu.tape.pojo.Clip">
		SELECT t1.id,t1.title,t1.clip_path,t1.thumbnail,
		t2.id "user.id", t2.avatar "user.avatar" ,t2.username "user.username",t1.create_time
		FROM tape_clip t1
		INNER JOIN tape_user t2 on t1.creator = t2.id
		ORDER BY t1.create_time
	</select>
    <select id="selectClipPage" resultType="site.imcu.tape.pojo.Clip">
		SELECT t1.id,t1.title,t1.clip_path,t1.thumbnail,
			   t2.id "user.id", t2.avatar "user.avatar" ,t2.username "user.username",t1.create_time
		FROM tape_clip t1
		INNER JOIN tape_user t2 on t1.creator = t2.id
			<if test="clip.creator != null">
				and t1.creator = #{clip.creator}
			</if>
		ORDER BY t1.create_time
	</select>
</mapper>